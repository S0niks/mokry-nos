<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Животные</title>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <div id="navbar"></div>
  <h1>Наши животные</h1>
  <div>
    <label>Вид:</label>
    <select id="species-filter">
      <option value="">Все</option>
      <option value="cat">Кошка</option>
      <option value="dog">Собака</option>
    </select>
    <label>Пол:</label>
    <select id="gender-filter">
      <option value="">Все</option>
      <option value="male">Мужской</option>
      <option value="female">Женский</option>
    </select>
    <button onclick="filterAnimals()">Фильтровать</button>
  </div>
  <div id="animal-container"></div>
  <script src="js/animal.js"></script>
  <script>
    // Load navbar
    fetch('/components/navbar.html')
  .then(response => response.text())
  .then(data => document.getElementById('navbar').innerHTML = data)
  .catch(err => console.error('Ошибка загрузки навигации:', err));

    // Load animals
    function loadAnimals(species = '', gender = '') {
      const query = new URLSearchParams({ species, gender }).toString();
      fetch(`/api/animals?${query}`)
        .then(response => response.json())
        .then(animals => {
          const container = document.getElementById('animal-container');
          container.innerHTML = '';
          animals.forEach(animal => {
            const div = document.createElement('div');
            div.innerHTML = `
              <h3>${animal.name}</h3>
              <p>Вид: ${animal.species}</p>
              <p>Пол: ${animal.gender}</p>
              <p>${animal.description}</p>
              <p>Статус: ${animal.status}</p>
            `;
            container.appendChild(div);
          });
        });
    }

    function filterAnimals() {
      const species = document.getElementById('species-filter').value;
      const gender = document.getElementById('gender-filter').value;
      loadAnimals(species, gender);
    }

    loadAnimals();
  </script>
</body>
</html>